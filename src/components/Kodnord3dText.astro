---
// Inget script block behövs
---

<div
  class="w-full h-[300px] md:h-[400px] flex flex-col justify-center items-center relative"
>
  <canvas id="kodnordCanvas" class="w-full h-full"> </canvas>
  <p class="absolute bottom-12 text-purple-400">Samuel von Zweigbergk</p>
</div>

<script>
  import * as THREE from "three";
  import { FontLoader } from "three/examples/jsm/loaders/FontLoader.js";
  import { TextGeometry } from "three/examples/jsm/geometries/TextGeometry.js";

  window.addEventListener("DOMContentLoaded", () => {
    const canvas = document.getElementById("kodnordCanvas");
    if (!canvas) return;

    const scene = new THREE.Scene();

    const camera = new THREE.PerspectiveCamera(
      45,
      canvas.clientWidth / canvas.clientHeight,
      0.1,
      1000
    );
    camera.position.z = 5;

    const renderer = new THREE.WebGLRenderer({
      canvas,
      alpha: true,
      antialias: true,
    });
    renderer.setSize(canvas.clientWidth, canvas.clientHeight);
    renderer.setPixelRatio(window.devicePixelRatio);

    const light = new THREE.DirectionalLight(0xffffff, 1.5);
    light.position.set(2, 2, 3);
    scene.add(light);

    const loader = new FontLoader();
    loader.load("/fonts/JetBrainsMono.json", (font) => {
      const geometry = new TextGeometry("KODNÖRD", {
        font,
        size: 1.6,
        depth: 0.2,
        curveSegments: 12,
        bevelEnabled: true,
        bevelThickness: 0.03,
        bevelSize: 0.02,
        bevelSegments: 5,
      });

      geometry.center();

      const material = new THREE.MeshStandardMaterial({
        color: new THREE.Color("powderblue"),
        metalness: 0.3,
        roughness: 0.5,
        emissive: new THREE.Color("powderblue"),
        emissiveIntensity: 0.5,
      });

      const mesh = new THREE.Mesh(geometry, material);
      mesh.rotation.y = 0;
      mesh.rotation.x = 0;
      scene.add(mesh);

      renderer.render(scene, camera);
    });
  });
</script>
